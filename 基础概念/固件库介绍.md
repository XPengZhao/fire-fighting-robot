# 固件库简介

ST(意法半导体)为了方便用户开发程序，提供了一套丰富的 STM32 固件库。这一节的知识可以参考《STM32 固件库使用手册中文翻译版》P32，固件库手册讲解更加详细。

## 1. 库开发与寄存器开发的关系

固件库就是函数的集合，固件库函数的作用是向下负责与寄存器直接打交道，向上提供用户函数调用的接口（API）。

如果我们要控制一些外设，我们常常的作法是直接操作寄存器，比如要控制某些 IO 口的状态，我们直接操作寄存器。在 STM32 的开发中，我们同样可以这样操作寄存器：
`GPIOx->BRR = 0x0011;`
但是这种方法的劣势是你需要去掌握每个寄存器的用法，你才能正确使用STM32，而对于 STM32 这种级别的 [MCU]，数百个寄存器记起来又是谈何容易。于是 ST(意法半导体)推出了官方固件库，固件库将这些寄存器底层操作都封装起来，提供一整套接口（API）供开发者调用，大多数场合下，你不需要去知道操作的是哪个寄存器，你只需要知道调用哪些函数即可。

比如上面的控制 BRR 寄存器实现电平控制，官方库封装了一个函数：

```c
void GPIO_ResetBits(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
{
  GPIO->BRR=GPIO_Pin;
}
```

这个时候你不需要再直接去操作 BRR 寄存器了，你只需要知道怎么使用 GPIO_ResetBits()这个函数就可以了。在你对外设的工作原理有一定的了解之后，你再去看固件库函数，基本上函数名字能告诉你这个函数的功能是什么，该怎么使用。

## 2. 学习过程

任何处理器，不管它有多么的高级，归根结底都是要对处理器的寄存器进行操作。但是固件库不是万能的，您如果想要把 STM32 学透，光读 STM32 固件库是远远不够的。你还是要了解一下 STM32 的原理，而这些原理了解了，你在进行固件库开发过程中才可能得心应手游刃有余。